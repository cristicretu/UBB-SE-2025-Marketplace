<?xml version="1.0" encoding="utf-8"?>
<Window  
   x:Class="MarketMinds.Views.MainNotificationWindow"  
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
   xmlns:local="using:MarketMinds"  
   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  
   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
   xmlns:Domain="using:MarketMinds.Shared.Models"  
   xmlns:viewmodel="using:MarketMinds.ViewModels"  
   xmlns:localConverters="using:MarketMinds.Converters"  
   mc:Ignorable="d">
    <Grid x:Name="RootGrid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.Resources>
            <localConverters:DateTimeToStringConverter x:Key="DateTimeToStringConverter" />
        </Grid.Resources>

        <!-- Header section -->
        <Border Grid.Row="0" Background="{ThemeResource SystemAccentColorLight3}" Padding="10" Width="Auto">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Button x:Name="BackButton"  
                   Content=""  
                   FontFamily="Segoe MDL2 Assets"  
                   FontSize="16"  
                   Margin="0,0,15,0"  
                   Padding="10,5"  
                   Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"  
                   Click="BackButton_Click"  
                   ToolTipService.ToolTip="Back to notifications"/>
                <TextBlock Text="{Binding UnReadNotificationsCountText}"  
                       Foreground="{ThemeResource SystemControlForegroundAltHighBrush}"  
                       FontSize="24"  
                       FontWeight="Bold"  
                       HorizontalAlignment="Center"/>
                <Button Content="Clear All"
                        Margin="50,0,0,0"
                        Background="{ThemeResource SystemControlForegroundAltHighBrush}"
                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                        FontSize="16"
                        Command="{Binding ClearAllCommand}"
                    />
            </StackPanel>
        </Border>

        <!-- Scrollable notifications content -->
        <ScrollViewer Grid.Row="1" 
                     VerticalScrollBarVisibility="Auto" 
                     HorizontalScrollBarVisibility="Auto"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch">
            <ListView x:Name="notificationList"  
                    SelectionChanged="NotificationList_SelectionChanged"  
                    ItemsSource="{Binding Notifications}"  
                    SelectionMode="Single"
                    HorizontalAlignment="Center"
                    Margin="15">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalAlignment" Value="Center"/>
                        <Setter Property="BorderBrush" Value="{ThemeResource SystemAccentColorLight3}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Padding" Value="20"/>
                        <Setter Property="Margin" Value="0,0,0,10"/>
                        <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
                        <Setter Property="MaxWidth" Value="850"/>
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid Width="760">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="{Binding Title}"  
                                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"  
                                        FontWeight="SemiBold"
                                        TextWrapping="Wrap"
                                        FontSize="20"/>
                                <TextBlock Text="{Binding Subtitle}"  
                                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                                        TextWrapping="Wrap"
                                        FontSize="18"  
                                        Margin="0,5,0,0"  
                                        Opacity="0.8"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                                <TextBlock Text="{Binding Timestamp}"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                        FontSize="16"/>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </ScrollViewer>
    </Grid>
</Window>